<!DOCTYPE html>
<html lang="zh-cn">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='http://localhost:1313/js/theme-mode.js'></script>
    <link rel="stylesheet" href='http://localhost:1313/css/frameworks.min.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/github.min.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/github-style.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/light.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/dark.css' />
    <link rel="stylesheet" href='http://localhost:1313/css/syntax.css' />
    <title>村村通问题01 - 一切都是命运石之门的选择！</title>
    
    <link rel="icon" type="image/x-icon" href='/R-C.png'>
    
    <meta name="theme-color" content="#1e2327">

    <link rel="stylesheet" href="http://localhost:1313/css/custom.css">
    <script type="text/javascript" src="http://localhost:1313/js/custom.js"></script>

    
    <meta name="description"
  content="村村通问题的本质 最小生成树（MST）
Kruskal 算法思路 Kruskal（克鲁斯卡尔）算法是求解无向图最小生成树（MST） 的经典贪心算法，核心逻辑是：按边的权重从小到大依次选边，且保证选的边不形成环，直到选够「节点数 - 1」条边（生成树的边数固定为节点数 - 1）。
" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="http://localhost:1313/post/%E6%9D%91%E6%9D%91%E9%80%9A%E9%97%AE%E9%A2%98/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="村村通问题01 - 一切都是命运石之门的选择！" />
<meta name="twitter:description"
  content="村村通问题的本质 最小生成树（MST）
Kruskal 算法思路 Kruskal（克鲁斯卡尔）算法是求解无向图最小生成树（MST） 的经典贪心算法，核心逻辑是：按边的权重从小到大依次选边，且保证选的边不形成环，直到选够「节点数 - 1」条边（生成树的边数固定为节点数 - 1）。
" />
<meta name="twitter:site" content="http://localhost:1313/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="http://localhost:1313/">


<meta property="og:type" content="article" />
<meta property="og:title" content="村村通问题01 - 一切都是命运石之门的选择！">
<meta property="og:description"
  content="村村通问题的本质 最小生成树（MST）
Kruskal 算法思路 Kruskal（克鲁斯卡尔）算法是求解无向图最小生成树（MST） 的经典贪心算法，核心逻辑是：按边的权重从小到大依次选边，且保证选的边不形成环，直到选够「节点数 - 1」条边（生成树的边数固定为节点数 - 1）。
" />
<meta property="og:url" content="http://localhost:1313/post/%E6%9D%91%E6%9D%91%E9%80%9A%E9%97%AE%E9%A2%98/" />
<meta property="og:site_name" content="村村通问题01" />
<meta property="og:image"
  content="http://localhost:1313/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-12-10 23:07:10 &#43;0800 CST" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="http://localhost:1313/">
        <img class="octicon" height="32" width="32" src="/R-C.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" action="https://www.google.com/search" method="get" autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off" onfocus="this.value=''">
              
              <input type="hidden" name="as_sitesearch" value="http://localhost:1313/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="http://localhost:1313/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/R-C.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="http://localhost:1313/">
                  <img class=" avatar-user"
                    src="/%e5%85%8b%e9%87%8c%e6%96%af.jpg"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="http://localhost:1313/">天才变态少女</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="http://localhost:1313/post/%E6%9D%91%E6%9D%91%E9%80%9A%E9%97%AE%E9%A2%98/">村村通问题01</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Wed, 10 Dec 2025 23:07:10 &#43;0800"
                    class="no-wrap">
                    Wed, 10 Dec 2025 23:07:10 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Thu, 11 Dec 2025 02:32:39 &#43;0800"
                    class="no-wrap">
                    Thu, 11 Dec 2025 02:32:39 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1710 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h2 id="村村通问题的本质">村村通问题的本质</h2>
<p><strong>最小生成树（MST）</strong></p>
<h2 id="kruskal-算法思路">Kruskal 算法思路</h2>
<p>Kruskal（克鲁斯卡尔）算法是求解<strong>无向图最小生成树（MST）</strong> 的经典贪心算法，核心逻辑是：<strong>按边的权重从小到大依次选边，且保证选的边不形成环，直到选够「节点数 - 1」条边（生成树的边数固定为节点数 - 1）</strong>。</p>
<p>该算法的关键是「贪心选边」+「并查集（Union-Find）判环 / 合并集合」，专门适配 “村村通” 这类求最小连通成本的问题，以下是分步骤的详细思路：</p>
<h3 id="步骤拆解结合-村村通-场景">步骤拆解（结合 “村村通” 场景）</h3>
<p>假设场景：有 <code>N</code> 个村落（节点），<code>M</code> 条可选道路（边），每条道路有建设成本（边的权重），目标是用最低成本让所有村落连通。</p>
<h4 id="步骤-1预处理--边按权重升序排序">步骤 1：预处理 —— 边按权重升序排序</h4>
<p>将所有候选道路（边）按照<strong>建设成本（权重）从小到大</strong>排序。</p>
<ul>
<li>贪心逻辑：优先选成本最低的道路，是实现 “最小总成本” 的核心。</li>
<li>例如样例中，先排序出权重 1 的边（3-5、3-6），再是权重 2 的边（2-5、1-6），依此类推。</li>
</ul>
<h4 id="步骤-2初始化并查集">步骤 2：初始化并查集</h4>
<p>并查集是一种高效管理 “集合归属” 的数据结构，用于快速判断「两个村落是否已连通」（避免选边形成环）、「合并两个不连通的村落集合」。</p>
<ul>
<li>初始化：每个村落独立为一个集合（即每个节点的父节点指向自己）。</li>
<li>例如样例中，初始时村落 1、2、3、4、5、6 各自为一个独立集合。</li>
</ul>
<h4 id="步骤-3贪心遍历选边核心步骤">步骤 3：贪心遍历选边（核心步骤）</h4>
<p>遍历排序后的所有边，对每条边执行以下判断：</p>
<ol>
<li><strong>判环</strong>：用并查集的 <code>find</code> 方法，查找当前边的两个村落的「根节点」：
<ul>
<li>若两个根节点相同：说明两个村落已连通，选这条边会形成环，<strong>跳过</strong>。</li>
<li>若两个根节点不同：说明两个村落未连通，选这条边不会形成环，执行下一步。</li>
</ul>
</li>
<li><strong>合并 + 累加成本</strong>：
<ul>
<li>用并查集的 <code>union</code> 方法，将两个村落的集合合并（让它们连通）。</li>
<li>累加这条边的成本到总费用中。</li>
<li>记录已选边数（生成树需要「N-1」条边）。</li>
</ul>
</li>
</ol>
<h4 id="步骤-4终止条件与结果判断">步骤 4：终止条件与结果判断</h4>
<ul>
<li>终止条件：当已选边数达到「N-1」时，停止遍历（生成树已形成，无需继续选边）。</li>
<li>结果判断：
<ul>
<li>若已选边数 = N-1：总累加成本即为 “村村通” 的最低成本。</li>
<li>若遍历完所有边，已选边数 &lt; N-1：说明村落无法全部连通（如存在多个孤立的连通分量），输出 - 1。</li>
</ul>
</li>
</ul>
<h3 id="关键支撑并查集的作用">关键支撑：并查集的作用</h3>
<p>Kruskal 算法的效率依赖并查集的两个核心操作（均做了优化）：</p>
<ol>
<li><code>find(x)</code>：查找节点 x 的根节点，通过「路径压缩」将 x 直接指向根节点，后续查询复杂度近似 O (1)。</li>
<li><code>union(x,y)</code>：合并 x 和 y 所在的集合（通常简单合并或按秩合并），保证集合管理的高效性。</li>
</ol>
<h3 id="kruskal-算法复杂度分析">Kruskal 算法复杂度分析</h3>
<ul>
<li>时间复杂度：主要由「边排序」决定，为 <code>O(M log M)</code>（M 为边数）；并查集的 find/union 操作近似 O (1)，整体复杂度为 <code>O(M log M)</code>。</li>
<li>适用场景：适合<strong>稀疏图</strong>（边数少），本题中 M≤3N（N≤1000），属于稀疏图，非常适配 Kruskal 算法。</li>
</ul>
<h3 id="总结">总结</h3>
<p>Kruskal 算法的核心可概括为：<strong>“排序边 + 查环（并查集）+ 选边（无环则加）”</strong>，贪心策略保证了选边的最小成本，并用查集高效避免环的形成，最终得到无环、连通、总权重最小的生成树。</p>
<h2 id="java-代码实现">Java 代码实现</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>details<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>summary<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Arrays;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Scanner;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 定义边类，实现Comparable接口用于按权重排序</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Edge</span> <span style="color:#66d9ef">implements</span> Comparable<span style="color:#f92672">&lt;</span>Edge<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> u;          <span style="color:#75715e">// 起点城镇</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> v;          <span style="color:#75715e">// 终点城镇</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> weight;     <span style="color:#75715e">// 改建成本</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Edge</span>(<span style="color:#66d9ef">int</span> u, <span style="color:#66d9ef">int</span> v, <span style="color:#66d9ef">int</span> weight) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">u</span> <span style="color:#f92672">=</span> u;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">v</span> <span style="color:#f92672">=</span> v;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">weight</span> <span style="color:#f92672">=</span> weight;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 按权重升序排序</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compareTo</span>(Edge o) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">weight</span> <span style="color:#f92672">-</span> o.<span style="color:#a6e22e">weight</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> parent; <span style="color:#75715e">// 并查集父节点数组</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 查找根节点（带路径压缩，优化查询效率）</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">find</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (parent<span style="color:#f92672">[</span>x<span style="color:#f92672">]</span> <span style="color:#f92672">!=</span> x) {
</span></span><span style="display:flex;"><span>            parent<span style="color:#f92672">[</span>x<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> find(parent<span style="color:#f92672">[</span>x<span style="color:#f92672">]</span>); <span style="color:#75715e">// 路径压缩：将节点直接指向根</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> parent<span style="color:#f92672">[</span>x<span style="color:#f92672">]</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 合并两个集合</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">union</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> rootX <span style="color:#f92672">=</span> find(x);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> rootY <span style="color:#f92672">=</span> find(y);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (rootX <span style="color:#f92672">!=</span> rootY) {
</span></span><span style="display:flex;"><span>            parent<span style="color:#f92672">[</span>rootY<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> rootX; <span style="color:#75715e">// 将y的根节点指向x的根节点</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        Scanner scanner <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Scanner(System.<span style="color:#a6e22e">in</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 多组测试数据处理</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (scanner.<span style="color:#a6e22e">hasNextInt</span>()) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> N <span style="color:#f92672">=</span> scanner.<span style="color:#a6e22e">nextInt</span>(); <span style="color:#75715e">// 城镇数目</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> M <span style="color:#f92672">=</span> scanner.<span style="color:#a6e22e">nextInt</span>(); <span style="color:#75715e">// 候选道路数目</span>
</span></span><span style="display:flex;"><span>            Edge<span style="color:#f92672">[]</span> edges <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Edge<span style="color:#f92672">[</span>M<span style="color:#f92672">]</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 读取所有候选道路</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> M; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> u <span style="color:#f92672">=</span> scanner.<span style="color:#a6e22e">nextInt</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> v <span style="color:#f92672">=</span> scanner.<span style="color:#a6e22e">nextInt</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> weight <span style="color:#f92672">=</span> scanner.<span style="color:#a6e22e">nextInt</span>();
</span></span><span style="display:flex;"><span>                edges<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Edge(u, v, weight);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 按权重升序排序边</span>
</span></span><span style="display:flex;"><span>            Arrays.<span style="color:#a6e22e">sort</span>(edges);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 初始化并查集：每个城镇初始为自身的父节点</span>
</span></span><span style="display:flex;"><span>            parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>N <span style="color:#f92672">+</span> 1<span style="color:#f92672">]</span>; <span style="color:#75715e">// 城镇编号从1到N，索引0不用</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1; i <span style="color:#f92672">&lt;=</span> N; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                parent<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> selectedEdges <span style="color:#f92672">=</span> 0; <span style="color:#75715e">// 已选边数（目标：N-1）</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> totalCost <span style="color:#f92672">=</span> 0;     <span style="color:#75715e">// 最小总成本</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 遍历排序后的边，贪心选边</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (Edge edge : edges) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> rootU <span style="color:#f92672">=</span> find(edge.<span style="color:#a6e22e">u</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> rootV <span style="color:#f92672">=</span> find(edge.<span style="color:#a6e22e">v</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 若两个城镇不属于同一集合，合并并累加成本</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (rootU <span style="color:#f92672">!=</span> rootV) {
</span></span><span style="display:flex;"><span>                    union(rootU, rootV);
</span></span><span style="display:flex;"><span>                    totalCost <span style="color:#f92672">+=</span> edge.<span style="color:#a6e22e">weight</span>;
</span></span><span style="display:flex;"><span>                    selectedEdges<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// 选够N-1条边，提前终止</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> (selectedEdges <span style="color:#f92672">==</span> N <span style="color:#f92672">-</span> 1) {
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 输出结果：选够N-1条边则输出总成本，否则输出-1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (selectedEdges <span style="color:#f92672">==</span> N <span style="color:#f92672">-</span> 1) {
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(totalCost);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#f92672">-</span>1);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        scanner.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>summary<span style="color:#f92672">&gt;</span>
</span></span></code></pre></div></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='http://localhost:1313/js/toc.js'></script>
<link rel="stylesheet" href='http://localhost:1313/css/toc.css' />

  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='http://localhost:1313/css/gitalk.css'>
<script src='http://localhost:1313/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'ov231i3P1jRHcpsuKV',
    clientSecret: 'f2a5:f781c08b7d49bf6a43e188b7da4575cd',
    repo: 'blog-comments',
    owner: 'Noctis-SiKong',
    admin: ['Noctis-SiKong'],
    id: eval( null ), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="http://localhost:1313/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="http://localhost:1313/js/github-style.js"></script>







</html>